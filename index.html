<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Superbalist Image Navigator Challenge</title>
</head>
<style>
    .imgNav {
        display: flex;
        height: 100vh;
        align-content: center;
        justify-content: center;
        align-items: center;
        flex-direction: column;
    }

    .imgViewer {
        background-color: black;
        background-size: cover;
        background-position-x: center;
        background-position-y: center;
    }

    .hintText {
        background-color: black;
        color: white;
        font-family: Verdana, Geneva, Tahoma, sans-serif;
        font-size: 110%;
        width: 480px;
        padding: 16px 0;
        text-align: center;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 8px 8px;
    }
</style>

<body>
    <div id="mySuperbContainer"></div>
</body>
<script>
    //**** This is the plugin part ****//
    let currentImage = 0;
    Object.prototype.makeSuperb = function(options){
        options["container"] =  this.id;
        superbNavGallery(options); 
    }
    function superbNavGallery(options) {
        if (options?.imgList.length > -1) {
            if (!options?.container) console.log("Please specify the container element ID");
            let container = document.getElementById(options?.container);
            let viewPort = document.createElement("div");
            let hint = document.createElement("div");
            viewPort.className = "imgViewer";
            container.className = "imgNav";
            container.appendChild(viewPort);

            const imageViewer = document.querySelector(".imgViewer");

            imageViewer.style.width = `${options.width ? options.width : 300}px`;
            imageViewer.style.height = `${options.height ? options.height : 300}px`;
            imageViewer.style.borderRadius = `${options.roundCorners ? options.roundCorners : 0}px`;
            imageViewer.style.boxShadow = `${options.dropShaddow ? "1px 1px 5px black" : "unset"}`;

            if (options.showHint) {
                hint.className = "hintText"
                hint.innerText = options.hintText ? options.hintText : "Use the j/k or arrow keys to navigate.";
                hint.style.width = `${options.width ? options.width : 300}px`
                hint.style.borderRadius = `${options.roundCorners ? options.roundCorners : 0}px`;
                hint.style.boxShadow = `${options.dropShaddow ? "1px 1px 5px black" : "unset"}`
                container.appendChild(hint);
            }
            function updateImage(i) {
                document.querySelector(".imgViewer").style.backgroundImage = `url(${options.imgList[i]})`
            }

            //Capture keyboard event
            document.onkeydown = navigate;

            if (options.slideShow) {
                setInterval(() => {
                    options.reverseShow ? previousImage() : nextImage()
                }, options.slideShow * 1000);
            }

            function navigate(e) {
                e = e || window.event;
                if (e.keyCode === 75 || e.keyCode === 39) {
                    nextImage();
                } else if (e.keyCode === 74 || e.keyCode === 37) {
                    previousImage();
                }
                updateImage(currentImage);
            }

            function nextImage() {
                if (currentImage < options.imgList.length - 1) {
                    currentImage++;
                } else if (options.loopImages) {
                    currentImage = 0;
                }
                updateImage(currentImage);
            }
            function previousImage() {
                if (currentImage > 0) {
                    currentImage--;
                } else if (options.loopImages) {
                    currentImage = options.imgList.length - 1;
                }
                updateImage(currentImage);
            }
            //Set initial image
            updateImage(currentImage);
        }
    }
    //**** End of the plugin part ****//

    //#Start of Example usage//
    const superbElement = document.getElementById("mySuperbContainer");
    const superbOptions = {
        showHint: true, //Descide whether to display of instructions
        hintText: "Sebenzisa amaqhosha otolo okanye j/k ukujonga imifanekiso.", //Custom instruction / hint text.
        loopImages: true, //Depending on the direction  we returns to the first / last image when the end is reached.
        width: 480, // Custom width option
        height: 480, // Custom height option
        roundCorners: 16, // Adds a rounded corner to the interface
        dropShaddow: true,
        slideShow: 0, // Default is zero. Enter a positive value in seconds to advance to next image.
        reverseShow: false, // This changes the direction of the show when 'slideShow' has a positive value
        imgList: [
            'https://images.unsplash.com/photo-1561336313-0bd5e0b27ec8?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8c2FtcGxlfGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=500&q=60',
            'https://images.unsplash.com/photo-1531361171768-37170e369163?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTJ8fHNhbXBsZXxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=500&q=60',
            'https://images.unsplash.com/photo-1600716051809-e997e11a5d52?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8c2FtcGxlfGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=500&q=60',
            'https://images.unsplash.com/photo-1612528443702-f6741f70a049?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8M3x8c2FtcGxlfGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=500&q=60']
    }
    superbElement.makeSuperb(superbOptions);
    //#End of Example usage//
</script>

</html>